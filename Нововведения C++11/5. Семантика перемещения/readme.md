# Семантика перемещения

Семантика перемещения - набор правил и средств языка С++, предназначенных для перемещения объектов, время жизни которых скоро истекает, вместо их копирования.

Рассмотрим пример с кодом:

![image](https://github.com/netology-code/cppl-homeworks/assets/147130852/996a13c7-6668-42af-81bd-05adaac49679)

Данный код определяет функцию `swap`, которая принимает две ссылки на векторы целых чисел типа `std::vector<int>&`. Функция меняет местами содержимое векторов, используя временный вектор `tmp`.

Сначала функция создает временный вектор `tmp` и копирует в него содержимое первого вектора `lhs`. Затем, функция присваивает содержимое второго вектора `rhs` первому вектору `lhs`. Наконец, функция присваивает содержимое временного вектора `tmp` второму вектору `rhs`.

Здесь произойдёт три копирования, три потенциально затратных операции.

Если передать в эту функцию большие массивы, например, по 1’000’000 элементов, то в силу особенностей реализации `std::vector` будет 3’000’000 лишних операций копирования.

Решением этой проблемы будет использование `std::move`.

Когда объект перемещается с помощью `std::move`, его состояние и ресурсы, такие как динамическая память или открытые файлы, могут быть "украдены" другим объектом, тем самым избегая лишних копирований и улучшая производительность программы.

![image](https://github.com/netology-code/cppl-homeworks/assets/147130852/a4efed8d-1ed1-47ba-ae30-34a9dab28854)

В данном коде определена функция `swap`, которая принимает две ссылки на векторы целых чисел типа `std::vector<int>&`. Функция меняет местами содержимое векторов, используя функцию `std::move`.

Сначала функция создает временный вектор `tmp` и перемещает в него содержимое первого вектора `lhs`. Затем, функция перемещает содержимое второго вектора `rhs` в первый вектор `lhs`. Наконец, функция перемещает содержимое временного вектора `tmp` во второй вектор `rhs`.

Использование функции `std::move` позволяет эффективно перемещать содержимое векторов, минимизируя копирование и выделение памяти.

Таким образом, после вызова функции `swap` содержимое двух переданных векторов будет поменяно местами.

`std::vector` - это элемент, который содержит в себе указатель, поскольку он работает на динамической памяти. Вместо того, чтобы обходить все элементы `std::vector` мы обмениваем указатели. То есть, у `tmp` есть какой-то указатель, и у `lhs` также есть указатель. Вместо того, чтобы обходить и копировать все элементы, можно просто обменять два указателя.

В примере мы три раза обмениваем указатели:

`std::vector<int> tmp = std::move(lhs);`


`lhs = std::move(rhs);`

`rhs = std::move(tmp);`

Далее на курсе вы изучите эту тему подробнее.
